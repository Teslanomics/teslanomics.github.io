---
layout: page
title: Model 3 Cost Estimator - Full
permalink: "/model3cost2"
published: true
---

<!-- number formatting -->
<script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>

<style>

	 :root {
	   --form-bg-color: white;
		 --font-color: #474747;
		 --submit-color: #E85454;
		 --submit-color-darker: #00824A;
		 --submit-font-color: #fff;
		 --border-color: #474747;

	}

	.form {
		color: var(--font-color);
		background-color: var(--form-bg-color);
		padding: 5px;
		margin: 15px auto;
		width:100%;
	  max-width: 800px;
	}

	.form h1,h2 {
		color: var(--font-color);
	}

	select {
		min-width: 335px;
		margin-bottom: 5px;
		max-width: 500px;
		display: block;
	}

	.full {
		width:100%;
		display: block;
	}

	.choiceHeader {
		font-weight: bold;
		font-size: 1.5em;
	}

	input.radio {
		display: block;
	}

	circle {
		transition: all .5s ease-in-out;
		&:hover, &:focus, &:active {
			border: 1px solid rgba($font-color,.5);
		}
	}

	input[type="text"] {
	    background: #f5f5f5;
	    border: 0;
	    border: 1px solid #eee;
	    border-radius: 6px;
	    max-width: 150px;
	    padding: 5px;
	    margin-bottom: 5px;
	    width: 100%;
	}

	.form__button {
		height: 60px;
		width: 100%;
		max-width: 800px;
		border: none;
		background-color: var(--submit-color);
		color: var(--submit-font-color);
		text-transform: uppercase;
		font-family: 'Source Sans Pro', sans-serif;
		padding: 0 20px;
		border-radius: 5px;
		font-weight: 500;
		text-align: center;
		line-height: 60px;
		cursor: pointer;
		margin: 20px 0;
		transition: all .25s ease-in-out;
		&:hover, &:focus {
			background-color: var(--submit-color-darker);
			text-shadow: 1px 1px 1px rgba(0,0,0,.25);
			outline: none;
		}

	}

	li {
		width: 45%;
		list-style-type: none;
		float:left;
	}

	li p {
		text-align: center;
	}

	li img {
		display: block;
		margin: auto;
		max-width: 100px;
	}

	label {
		min-width: 25px;
		&:hover, &:focus, &:active {
			border: 1px solid rgba($font-color,.5);
		}
	}

	label > input{ /* HIDE RADIO */
	  visibility: hidden; /* Makes input not-clickable */
	  position: absolute; /* Remove input from document flow */
		float:left;
	}
	label > input + img{ /* IMAGE STYLES */
	  cursor:pointer;
	  border:2px solid transparent;
	}
	label > input:checked + img{ /* (RADIO CHECKED) IMAGE STYLES */
	  border:2px solid #474747;
	}

	input[type="radio"]:active ~ label {
	  opacity: 1;
	}

	input[type="radio"]:checked ~ label {
	  opacity: 1;
		border: 1px solid $font-color;
	}

	.preview {
		margin: 20px;
		min-height: 200px;
	}

	.option-left {
		min-width: 350px;
		float:left;
		width:50%;
		padding:10px;
	}

	.option-right {
		min-width: 350px;
		float: right;
		width:50%;
		padding: 10px;
	}

	@media only screen and (max-width: 768px) {
		[class*="option-"] {
			width: 100%;
			float:left;
			padding:0px;
		}
	}

	table {
		width: 100%;
		margin:5px;
	};
	table td {
		padding:2px;
		text-align: left;
	}

</style>

<script>

	var car = {"color":"black","wheel":"aero"};

	function updateCar(option,value) {

		wheelCost = 0;
		paintCost = 0;

		if(option == "color"){
			car.color = value;
		} else {
			car.wheel = value;
		}

		//update Cost
		if(car.wheel == 'sport'){
			wheelCost = 1500;
		} else {
			wheelCost = 0;
		}

		if(car.color != 'black') {
			paintCost = 1000;
		} else {
			paintCost = 0;
		}

		document.getElementById("wheelCost").value = wheelCost;
		document.getElementById("paintCost").value = paintCost;

		// console.log(car.color + '-' + car.wheel +'.png');

		//set car
		document.getElementById('carImg').src="/images/m3/" + car.color + '-' + car.wheel +'.png';
		document.getElementById('carImg2').src="/images/m3/" + car.color + '-' + car.wheel +'.png';

		//update total
		updateTotal();

	}

	function jsonToTable(container,data){

		$(container).html("");

		$.each(data, function(i, rw) {
			$(container).append("<tr><td class='thead'>" + data[i].item + "</td><td>" + data[i].value + "</td></tr>");
		});

	}

	function	updateColorChoice(color){
		document.getElementById('colorChoiceLabel').innerHTML=color;
	}

	function nextStep(n){
			// $("#step"+(n-1)).fadeOut(50);
			$("#step"+n).fadeIn(500);
	}

	function getCarCost(){

		var battery = $("input[name=battery]:checked").val(),
		autopilot = $("input[name=autopilot]:checked").val(),
		premium = $("input[name=premium]:checked").val(),
		paintCost = $("input[name=paintCost]").val(),
		wheelCost = $("input[name=wheelCost]").val(),

		//fees
		docFee = $("input[name=doc]").val(),
		taxRate = $("input[name=taxRate]").val(),
		subTotal = 0,
		taxAmt = 0,
		total = 0,
		r = [],
		o = [];

		//calculate totals
		subTotal += (+battery + +autopilot + +premium + +wheelCost + +paintCost).toFixed(2);
		taxAmt += (+subTotal * (+taxRate/100)).toFixed(2);
		total += (+subTotal + +taxAmt + +docFee).toFixed(2);

		r.push('"Price" : "' + numeral(subTotal).format('$0,0') + '"');
		r.push('"Taxes" : "' + numeral(taxAmt).format('$0,0') + '"');
		r.push('"Fees" : "' + numeral(docFee).format('$0,0') + '"');
		r.push('"Total" : "' + numeral(total).format('$0,0') + '"');

		o = "{" + r.join(",") + "}";

		// console.log(o);

		return JSON.parse(o);
	}

	function updateTotal() {

		c = getCarCost();

		// console.log("Total: " + c.Total);


		// $('#purchaseDetails').columns({
    //   data:c
    // });

		$("#purchaseDetails").html("<tr><td>Price</td><td>" + c.Price + "</td></tr>");
		$("#purchaseDetails").append("<tr><td>Taxes</td><td>" + c.Taxes + "</td></tr>");
		$("#purchaseDetails").append("<tr><td>Fees</td><td>" + c.Fees + "</td></tr>");
		$("#purchaseDetails").append("<tr><td>Total</td><td>" + c.Total + "</td></tr>");

		// makeTable($("#purchaseDetails"),c);

		$('#loanAmount').val(c.Total);

	}

	function loadResults(data) {

		console.log(data);

		var results = [],
				rArr = [],
				purchasePrice = 0,
				finalPrice = 0,
				lessIncentives = numeral($("input[name=incentive]").val());

		//purchase price

		purchasePrice = getCarCost();

		// rArr.push('{ "Total Cost":"' + numeral(purchasePrice.Total).format('$0,0') + '"}');
		rArr.push('{ "item":"Total Cost","value":"' + numeral(purchasePrice.Total).format('$0,0') + '"}');

		// monthly payment
		var monInt		=	numeral(data.loanInterest).format('0.00')/1200,
				payment 	=	0,
				amount		= numeral(data.loanAmount).format('0.00'),
				down			= numeral(data.loanDown).format('0.00'),
				months		= numeral(data.loanMonths).format('0.00');


		// console.log("amount: "+amount);
		// console.log("monInt: "+monInt);
		// console.log("down: "+down);
		// console.log("months: "+months);

		payment = ((monInt + (monInt / (Math.pow((1 + monInt), months) -1))) * (amount - (down || 0))).toFixed(2);

		// rArr.push('{ "Monthly Payment":"' + numeral(payment).format('$0,0.00') + '"}');
		rArr.push('{ "item":"Monthly Payment","value":"' + numeral(payment).format('$0,0.00') + '"}');

		// charging
		dailyCost = 0,
		monthlyCost = 0,
		dailyDuration = 0,
		commute = +data.commute, //option
		rate = +data.kwhRate, //option
		style = +data.drivingStyle,
		efficiency = 237, // 237 Wh per mi
		chargeRate = 30;

		//change battery to longer range if price matches
		if(data.battery=="44000"){ chargeRate=37 };

		//cost
		dailyCost = ((commute * efficiency) / 1000 * +rate).toFixed(2);
		// console.log("dailyCost: " + dailyCost);

		//dailyDuration
		d = (commute / chargeRate).toFixed(2);
		dd = (d % 1).toFixed(2);
		hr = (commute / chargeRate).toFixed(0);
		min = (dd * 60).toFixed(0);
		dailyDuration = hr + "hr " + min + "min";

		console.log("dailyDuration: " + dailyDuration);

		monthlyCost = (dailyCost*30).toFixed(2);

		// rArr.push('{ "Daily Charging Cost":"' + numeral(dailyCost).format('$0.00') + '"}');
		rArr.push('{ "item":"Daily Charging Cost","value":"' + numeral(dailyCost).format('$0.00') + '"}');

		// rArr.push('{ "Daily Charge Time":"' + dailyDuration + '"}');
		rArr.push('{ "item":"Daily Charge Time","value":"' + dailyDuration + '"}');

		// rArr.push('{ "Monthly Charging Cost":"' + numeral(monthlyCost).format('$0,0.00') + '"}');
		rArr.push('{ "item":"Monthly Charging Cost","value":"' + numeral(monthlyCost).format('$0,0.00') + '"}');

		// other
		var totalMonthly = 0,
				netPurchase = 0;

		totalMonthly = +payment + +data.insurance + +monthlyCost;
		console.log('payment ' + payment);
		console.log('data.insurance ' + data.insurance);
		console.log('monthlyCost ' + monthlyCost);

		rArr.push('{ "item":"Total Monthly Cost","value":"' + numeral(totalMonthly).format('$0,0.00') + '"}');


		// prepare for display and output
		results = "[" + rArr.join(",") + "]";

		console.log(results);

		// $("#results").append(results);

		jsonToTable("#summaryTable",JSON.parse(results));

		$("#results").fadeIn(500);

	}


		//do something on loadResults
		$(function(){
			updateTotal();
		});
		// do something when the form is submitted
		$(function() {
			$("form").submit(function( event ) {

				event.preventDefault();

				data = $( this ).serializeArray();

				// console.log( JSON.stringify(data) );

				var dataMap = [],
						dataObj = [];

				$.map(data, function(item){
				 dataMap.push('"' + item.name + '":"' + item.value + '"');
				});

				dataObj = "{" + dataMap.join(",") + "}";
				results = JSON.parse(dataObj);

				//load stuff
				loadResults(results);

			});
		});
		$(function(){
			var month = $(this).val(),
		      doneTypingInterval = 500,
		      months = parseInt(month),
		      typingTimer

		  $('#loanMonths').keyup(function(){
		      month = $(this).val();
		      months = parseInt(month);
		      clearTimeout(typingTimer);
		      if (month) {
		          typingTimer = setTimeout(doneTyping, doneTypingInterval);
		      }
		  });
		  function doneTyping () {
		    $('#loanYears').val((months/12).toFixed(0));
		  }
		})
		$(function(){
			var month = $(this).val(),
		      doneTypingInterval = 500,
		      months = parseInt(month),
		      typingTimer;
		  $('#loanMonths').keyup(function(){
		      month = $(this).val();
		      months = parseInt(month);
		      clearTimeout(typingTimer);
		      if (month) {
		          typingTimer = setTimeout(doneTyping, doneTypingInterval);
		      }
		  });
		  function doneTyping () {
		    $('#loanYears').val((months/12).toFixed(0));
		  }
		})
		$(function(){
			var year = $(this).val(),
		      doneTypingInterval = 500,
		      years = parseInt(year),
		      typingTimer;
		  $('#loanYears').keyup(function(){
		      year = $(this).val();
		      myears = parseInt(year);
		      clearTimeout(typingTimer);
		      if (year) {
		          typingTimer = setTimeout(doneTyping, doneTypingInterval);
		      }
		  });
		  function doneTyping () {
		    $('#loanMonths').val(year * 12);
		  }
		})


</script>
<form id="data">
	<div id="step1" class="form">
		<h2>Step 1: Configure Your Model 3</h2>

		<div id="upgrades" class="full">

			<div id="batteryChoice" class="option-left">
				<p class="choiceHeader">Choose Battery</p>
				<input type="radio" id="batteryChoice1" name="battery" value="35000" onclick="updateTotal();" checked>
				<label for="batteryChoice1">Standard ($35K)</label><br/>

				<input type="radio" id="batteryChoice2" name="battery" value="44000" onclick="updateTotal();">
				<label for="batteryChoice2">Long Range ($44K)</label>
			</div>

			<div id="autopilotChoice" class="option-right">
				<p class="choiceHeader">Autopilot Option</p>
				<input type="radio" id="autopilotChoice1" name="autopilot" value="0" onclick="updateTotal()" checked>
				<label for="autopilotChoice1">None ($0)</label><br/>

				<input type="radio" id="autopilotChoice2" name="autopilot" value="5000" onclick="updateTotal()">
				<label for="autopilotChoice2">Enhanced Autopilot ($5K)</label><br/>

				<input type="radio" id="autopilotChoice3" name="autopilot" value="8000" onclick="updateTotal()">
				<label for="autopilotChoice3">Full Self-Driving ($8K)</label>
			</div>

			<div id="premiumChoice" class="option-left">
				<p class="choiceHeader">Premium Upgrade</p>
				<input type="radio" id="premiumChoice1" name="premium" value="0" onclick="updateTotal()" checked>
				<label for="premiumChoice1">No ($0)</label><br/>

				<input type="radio" id="premiumChoice2" name="premium" value="5000" onclick="updateTotal()">
				<label for="premiumChoice2">Yes ($5K)</label>
			</div>

			<div id="fees" class="option-left">
				<p class="choiceHeader">Fees</p>
				<p>
					<label for="doc" class="fa fa-pencil"></label>
					<input type="text" id="doc" name="doc" value="1200" onchange="updateTotal()">
					<label for="doc">Dest. & Doc Fees</label>
				</p>
				<p>
					<label for="shipping" class="fa fa-percent"></label>
					<input type="text" id="taxRate" name="taxRate" value="5.6" onchange="updateTotal()">
					<label for="shipping">Tax Rate</label>
				</p>
			</div>

			<div id="colorChoice" class="option-right">
				<p class="choiceHeader">Choose Color</p>
					<div id="colorChoiceLabel">Solid Black</div>
					<!-- black -->
					<label>
				    <input type="radio" name="color" value="black" checked/>
						<svg height="100" width="50">
							<circle cx="25" cy="50" r="25" fill="#0A0B0B" stroke="#ACAEB0" stroke-width="1px"
								onclick="updateColorChoice('Solid Black'); updateCar('color','black');"/>
						</svg>
				  </label>
					<!-- midnight -->
					<label>
				    <input type="radio" name="color" value="midnight"/>
						<svg height="100" width="50">
							<circle cx="25" cy="50" r="25" fill="#2F2E35" stroke="#ACAEB0" stroke-width="1px"
								onclick="updateColorChoice('Midnight Silver Metallic +$1,000'); updateCar('color','midnight');"
							/>
						</svg>
				  </label>
					<!-- blue -->
					<label>
				    <input type="radio" name="color" value="blue"/>
						<svg height="100" width="50">
							<circle cx="25" cy="50" r="25" fill="#111E45" stroke="#ACAEB0" stroke-width="1px"
								onclick="updateColorChoice('Deep Blue Metallic +$1,000'); updateCar('color','blue');"
							/>
						</svg>
				  </label>

					<!-- silver -->
					<label>
				    <input type="radio" name="color" value="silver"/>
						<svg height="100" width="50">
							<circle cx="25" cy="50" r="25" fill="#ACAEB0"
								onclick="updateColorChoice('Silver Metallic +$1,000'); updateCar('color','silver');"
							/>
						</svg>
				  </label>
					<!-- white -->
					<label>
						<input type="radio" name="color" value="white"/>
						<svg height="100" width="50">
							<circle cx="25" cy="50" r="25" fill="#FDFEFE" stroke="#ACAEB0" stroke-width="1px"
								onclick="updateColorChoice('Pearl White Multi-Coat +$1,000'); updateCar('color','white');"
							/>
						</svg>
					</label>
					<!-- red -->
					<label>
						<input type="radio" name="color" value="red"/>
						<svg height="100" width="50">
							<circle cx="25" cy="50" r="25" fill="#BE3844"
								onclick="updateColorChoice('Red Multi-Coat +$1,000'); updateCar('color','red');"
							/>
						</svg>
					</label>
				</svg>


			</div>

			<div id="wheelChoice" class="option-right">
				<p class="choiceHeader">Wheel</p>
				<label>
			    <input type="radio" name="wheel" value="aero" class="wheelOption" checked/>
					<img
						src="/images/m3/aero-draw.png"
						onclick=updateCar('wheel','aero');
						style="width:50px;"
					/>
					18" Aero
			  </label>
				<label>
					<input type="radio" name="wheel" value="sport" class="wheelOption"/>
					<img
						src="/images/m3/sport-draw.png"
						onclick="updateCar('wheel','sport')";
						style="width:50px;"
					/>
					19" Sport
				</label>
			</div>

			<div id="previewImage" class="preview">
				<!-- <p class="choiceHeader">Your Car</p> -->
				<img id="carImg" src="/images/m3/black-aero.png"
					style="width:95%; max-width:850px; margin:5px; background-color:#fff; padding:5px;"
				/>
			</div>

		</div>

		<!-- hidden cost vars -->
		<input type="hidden" name="wheelCost" id="wheelCost" value="0">
		<input type="hidden" name="paintCost" id="paintCost" value="0">

		<button class="form__button" onclick="nextStep(2)" type="button">Next Step: Loan</button>


	</form>

	<div id="step2" class="form" style="display:none;">
		<h2>Step 2: Enter Loan Information</h2>

		<table id="purchaseDetails"></table>

		<p>
			<label for="loanAmount" class="fa fa-usd"></label>
			<input type="text" id="loanAmount" name="loanAmount" value="38160">
			<label for="loanAmount">Loan Amount</label>
		</p>
		<p>
			<label for="loanMonths" class="fa fa-calendar"></label>
			<input type="text" id="loanMonths" name="loanMonths" value="60">
			<label for="loanMonths">Months</label>
		</p>
		<p>
			<label for="loanYears" class="fa fa-calendar"></label>
			<input type="text" id="loanYears" name="loanYears"  value="5">
			<label for="loanYears" class="">Years</label>
		</p>
		<p>
			<label for="loanInterest" class="fa fa-percent"></label>
			<input type="text" id="loanInterest" name="loanInterest" value="4.5">
			<label for="loanInterest">Interest</label>
		</p>
		<p>
			<label for="loanDown" class="fa fa-arrow-down"></label>
			<input type="text" id="loanDown" name="loanDown" value="2500">
			<label for="loanDown" class="">Down Payment</label>
		</p>
			<button class="form__button" onclick="nextStep(3)" type="button">Next Step: Charging</button>
	</div>

	<div id="step3" class="form" style="display:none;">
		<h2>Step 3: Enter Driving Habits</h2>
			<p>
				<label for="down" class="fa fa-car"></label>
				<input type="text" id="commute" name="commute" placeholder="Commute (mi)" value="40">
				<label for="down">Commute (mi)</label>
			</p>

			<p>
				<label for="kwhRate" class="fa fa-bolt"></label>
				<input type="text" id="kwhRate" name="kwhRate" placeholder="$ per kWh" value="0.16">
				<label for="kwhRate" class="">$ per kWh</label>
			</p>

				<div id="styleChoice" class="option-left">
					<p class="choiceHeader">How do you drive?</p>

					<input type="radio" id="styleChoice1" name="drivingStyle" value="0.85">
					<label for="styleChoice1">Slow</label><br/>

					<input type="radio" id="styleChoice2" name="drivingStyle" value="1.00" checked>
					<label for="styleChoice2">Moderate</label><br/>

					<input type="radio" id="styleChoice3" name="drivingStyle" value="1.15">
					<label for="styleChoice3">Fast</label>
				</div>
				<!-- efficiency ref - https://electrek.co/2017/07/28/tesla-accidentally-reveals-model-3-efficiency-hinting-at-impressive-range/-->


			<button class="form__button" onclick="nextStep(4)" type="button">Last Step: Options</button>


	</div>

	<div id="step4" class="form" style="display:none;">
		<h2>Step 4: Enter Options</h2>
		<p>
			<label for="insurance" class="fa fa-car"></label>
			<input type="text" id="insurance" name="insurance" value="120">
			<label for="insurance">Insurance/mo</label>
		</p>
		<p>
			<label for="incentives" class="fa fa-minus-circle"></label>
			<input type="text" id="incentives" name="incentives" value="0" onchange="updateTotal()">
			<label for="incentives">Incentives</label>
		</p>
		<p>
			<button class="form__button" type="submit">See Results</button>
		</p>
	</div>
</form>

<div id="results" style="display:none;">
	<div id="previewImage2" class="preview">
		<!-- <p class="choiceHeader">Your Car</p> -->
		<img id="carImg2" src="/images/m3/black-aero.png"
			style="width:95%; max-width:850px; margin:5px; background-color:#fff; padding:5px;"
		/>
	</div>
	<h2>Monthly Cost Estimate</h2>
	<table id="summaryTable"></table>
	<table id="detailsTable"></table>
</div>
